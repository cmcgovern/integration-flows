{"id":55405,"name":"Forrester_B2BFailure","userId":55170,"accountId":42187,"createdDate":"2021-06-21T17:49:36Z","steps":[{"id":543736,"onSuccess":["snowPayload"],"onFailure":[],"name":"disableSyncUser","type":"elementRequest","properties":{"method":"PUT","elementInstanceId":"${config.syncplicity}","api":"/users/${trigger.args.emailAddress}","body":"${steps.syncDisable.body}"}},{"id":543725,"onSuccess":["slackPayload"],"onFailure":[],"name":"openSnowIncident","type":"elementRequest","properties":{"method":"POST","elementInstanceId":"${config.serviceNow}","api":"/incidents","body":"${steps.snowPayload.body}"}},{"id":543734,"onSuccess":[],"onFailure":[],"name":"send2slack","type":"elementRequest","properties":{"method":"POST","elementInstanceId":"${config.slack}","api":"/channels/${config.slackChannel}/messages","body":"${steps.slackPayload.body}"}},{"id":543733,"onSuccess":["send2slack"],"onFailure":[],"name":"slackPayload","type":"script","properties":{"body":"let body = {\"text\": '\"'+\"User \"+trigger.args.emailAddress+\" disabled due to transfer violation. Service Now use case opened, ID=\"+steps.openSnowIncident.response.body.number+\".\"+'\"'};\r\ndone({body:body});"}},{"id":543729,"onSuccess":["openSnowIncident"],"onFailure":[],"name":"snowPayload","type":"script","properties":{"body":"let description = \"User \"+trigger.args.emailAddress+\" has been disabled pending investigation due to validation error(s).\";\r\nlet body = {\r\n  \"active\": true,\r\n  \"activity_due\": \"2020-06-18T17:58:27.162Z\",\r\n  \"additional_assignee_list\": \"\",\r\n  \"approval_history\": \"\",\r\n  \"approval_set\": \"\",\r\n  \"assigned_to\": \"\",\r\n  \"assignment_group\": \"\",\r\n  \"business_duration\": \"2020-06-18T17:58:27.162Z\",\r\n  \"business_service\": \"string\",\r\n  \"business_stc\": \"string\",\r\n  \"calendar_duration\": \"2020-06-18T17:58:27.162Z\",\r\n  \"calendar_stc\": \"string\",\r\n  \"caller_id\": \"Test Test2\",\r\n  \"caused_by\": \"string\",\r\n  \"category\": \"Flow\",\r\n  \"child_incidents\": \"string\",\r\n  \"close_code\": \"string\",\r\n  \"close_notes\": \"string\",\r\n  \"closed_at\": \"2020-06-18T17:58:27.162Z\",\r\n  \"closed_by\": \"string\",\r\n  \"cmdb_ci\": \"CLOUD_SERVICE_OFFERING\",\r\n  \"comments\": \"Forrester 2021 Demo Test - For info reach out to Daniel Wille (dwille@axway.com)\",\r\n  \"comments_and_work_notes\": \"string\",\r\n  \"company\": \"4204fa1787aca10008eb171489434dbb\",\r\n  \"contact_type\": \"Web portal\",\r\n  \"correlation_display\": \"string\",\r\n  \"correlation_id\": \"string\",\r\n  \"delivery_plan\": \"string\",\r\n  \"delivery_task\": \"string\",\r\n  \"description\": description,\r\n  \"due_date\": \"2020-06-18T17:58:27.162Z\",\r\n  \"escalation\": 0,\r\n  \"expected_start\": \"2020-06-18T17:58:27.162Z\",\r\n  \"follow_up\": \"string\",\r\n  \"group_list\": \"string\",\r\n  \"hold_reason\": \"string\",\r\n  \"impact\": \"2 - High\",\r\n  \"incident_state\": \"string\",\r\n  \"knowledge\": true,\r\n  \"location\": \"string\",\r\n  \"made_sla\": true,\r\n  \"notify\": \"string\",\r\n  \"number_\": \"string\",\r\n  \"opened_at\": \"2020-06-18T17:58:27.162Z\",\r\n  \"opened_by\": \"string\",\r\n  \"order\": \"string\",\r\n  \"parent\": \"string\",\r\n  \"parent_incident\": \"string\",\r\n  \"priority\": \"2 - Urgent\",\r\n  \"reassignment_count\": \"string\",\r\n  \"reopen_count\": \"string\",\r\n  \"resolved_at\": \"string\",\r\n  \"resolved_by\": \"string\",\r\n  \"rfc\": \"string\",\r\n  \"severity\": \"3 - Low\",\r\n  \"short_description\": \"Forrester 2021 - User Disabled\",\r\n  \"sla_due\": \"string\",\r\n  \"state\": \"New\",\r\n  \"subcategory\": \"Email\",\r\n  \"sys_domain_path\": \"/\",\r\n  \"sys_mod_count\": 0,\r\n  \"sys_tags\": \"\",\r\n  \"time_worked\": \"2020-06-18T17:58:27.162Z\",\r\n  \"u_detection_origin\": \"Cloud operator\",\r\n  \"u_internal_incident\": \"true\",\r\n  \"u_production_context\": \"No\",\r\n  \"upon_approval\": \"Proceed to Next Task\",\r\n  \"upon_reject\": \"Cancel All Future Tasks\",\r\n  \"urgency\": \"2 - Medium\",\r\n  \"user_input\": \"UNKNOWN\",\r\n  \"watch_list\": \"UNKNOWN\",\r\n  \"work_end\": \"2020-06-18T17:58:27.162Z\",\r\n  \"work_notes\": \"User has been disabled.\",\r\n  \"work_notes_list\": \"UNKNOWN\",\r\n  \"work_start\": \"2020-06-18T17:58:27.162Z\"\r\n};\r\ndone({body:body});"}},{"id":543735,"onSuccess":["disableSyncUser"],"onFailure":[],"name":"syncDisable","type":"script","properties":{"body":"let body = {\"Disabled\":true};\r\ndone({body:body});"}}],"triggers":[{"id":47660,"onSuccess":["syncDisable"],"onFailure":[],"type":"manual","async":true,"active":true,"name":"trigger","properties":{}}],"engine":"v3","active":true,"debugLoggingEnabled":false,"singleThreaded":false,"configuration":[{"id":94664,"key":"serviceNow","name":"serviceNow","type":"elementInstance","required":true},{"id":94665,"key":"slack","name":"slack","type":"elementInstance","required":true},{"id":94667,"key":"slackChannel","name":"slackChannel","type":"value","required":true},{"id":94666,"key":"syncplicity","name":"syncplicity","type":"elementInstance","required":true}]}